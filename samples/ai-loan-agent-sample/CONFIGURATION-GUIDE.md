# üîß Configuration Guide - What You Need to Change

This guide explains **exactly what you need to customize** for your deployment. The sample includes working examples, but you'll need to update specific values.

## ‚ö° **Quick Start - 5 Minute Setup**

### **Step 1: Update Subscription & Resource Names**

**Files to Edit**: `Deployment/helpers/generate-runtime-urls.ps1`, `Deployment/helpers/get-connection-details.ps1`

```powershell
# Change these values:
$subscriptionId = "YOUR-ACTUAL-SUBSCRIPTION-ID"    # Get from: az account show --query id
$resourceGroup = "YOUR-RESOURCE-GROUP-NAME"        # Use your preferred name
```

### **Step 2: Update SQL Scripts**

**Files to Edit**: `setup-managed-identity-user.sql`, `create-managed-identity-user.sql`

```sql
-- Change these values:
USE [YOUR-DATABASE-NAME]                           -- Your database name from deployment
CREATE USER [YOUR-LOGIC-APP-NAME] FROM EXTERNAL PROVIDER;  -- Your Logic App name
```

### **Step 3: Update Teams Configuration**

**File to Edit**: `LogicApps/TEAMS-SETUP.md`, `LogicApps/cloud.settings.json`

```json
{
  "TeamsGroupId": "YOUR-TEAMS-GROUP-ID",           // Get from Teams channel URL
  "TeamsChannelId": "YOUR-TEAMS-CHANNEL-ID"       // Get from Teams channel URL
}
```

### **Step 4: Deploy and Generate Policy URL**

1. **Run Deployment**: `./deploy.ps1` (this creates the storage account and policy document)
2. **Update Policy URLs**: After deployment, the script automatically generates the correct SAS URLs

## üéØ **What's Already Configured (No Changes Needed)**

- ‚úÖ **Sample Data**: All SSNs use 555-XXX-XXXX (safe for testing)
- ‚úÖ **Email Examples**: All use @example.com (safe for demos)
- ‚úÖ **Database Schema**: Complete table structure with sample data
- ‚úÖ **Logic App Workflows**: Ready-to-deploy workflow definitions
- ‚úÖ **API Management**: Mock APIs configured for testing

## üìã **Detailed Configuration Reference**

### **üîê Sensitive Values to Update**

| Configuration | Example Value | Where to Change | How to Get Real Value |
|---------------|---------------|-----------------|----------------------|
| **Subscription ID** | `12345678-abcd-efgh-ijkl-123456789012` | PowerShell scripts | `az account show --query id` |
| **Resource Group** | `my-loan-agent-rg` | Multiple files | Choose your preferred name |
| **Logic App Name** | `my-loan-agent-logicapp` | SQL scripts | Choose your preferred name |
| **Database Name** | `my-loan-agent-db` | SQL scripts | Choose your preferred name |
| **Teams Group ID** | `a1b2c3d4-e5f6-7890-abcd-ef1234567890` | Teams configs | Teams channel URL |
| **Teams Channel ID** | `19:example1234567890@thread.tacv2` | Teams configs | Teams channel URL |

### **üîÑ Auto-Generated Values (Don't Change)**

| Configuration | Example Value | Generated By |
|---------------|---------------|--------------|
| **Storage URLs** | `https://mystorageaccount123.blob.core.windows.net/...` | `deploy.ps1` script |
| **SAS Tokens** | `?sp=r&st=2024-01-01T00:00:00Z&se=2025-12-31T23:59:59Z&...` | `deploy.ps1` script |
| **Connection Keys** | API Management subscription keys | `deploy.ps1` script |

## üõ†Ô∏è **Deployment Workflow**

```bash
# 1. Clone and configure
git clone <repository>
cd samples/ai-loan-agent-sample

# 2. Update configuration (see Step 1-3 above)
# Edit the files listed in Quick Start section

# 3. Deploy infrastructure  
./Deployment/deploy.ps1

# 4. The script automatically:
#    - Creates all Azure resources
#    - Generates SAS URLs for policy documents
#    - Updates local.settings.json with correct values
#    - Sets up API Management with subscription keys

# 5. Deploy Logic Apps
# Use VS Code Azure Logic Apps extension to deploy workflows
```

## ‚ö†Ô∏è **Common Mistakes to Avoid**

1. **Don't change sample data**: The SSNs (555-XXX-XXXX) and emails (@example.com) are designed to be safe
2. **Don't manually edit SAS URLs**: Let the deployment script generate these
3. **Don't commit real credentials**: Keep your actual subscription ID and Teams IDs out of version control
4. **Do update SQL scripts**: The managed identity names must match your actual Logic App name

## üîí **Security Best Practices**

- ‚úÖ **Use .env files**: Keep sensitive configs in local environment files
- ‚úÖ **Azure Key Vault**: For production, store secrets in Key Vault
- ‚úÖ **Managed Identity**: SQL connections use managed identity (no passwords)
- ‚úÖ **SAS Token Rotation**: Regenerate SAS tokens periodically

---

**üí° Pro Tip**: The deployment script does most of the work for you. Just update the basic configuration values, run `deploy.ps1`, and you're ready to go!